# 🎬 CinemaGuide

Онлайн-платформа для поиска фильмов, просмотра трейлеров и управления списком избранного.

## 📑 Основные возможности

- 🔍 **Поиск фильмов**: Удобный поиск фильмов по жанрам и ключевым словам.
- 🎥 **Просмотр трейлеров**: Воспроизведение трейлеров фильмов прямо на сайте.
- ⭐️ **Управление избранным**: Добавление и удаление фильмов из списка избранного.
- 📱 **Адаптивный дизайн**: Оптимизация отображения для мобильных устройств, планшетов и настольных компьютеров.

## 🛠 Стек технологий

- **React**: Фреймворк пользовательского интерфейса.
- **TypeScript**: Обеспечение типизации и предотвращение ошибок на этапе разработки.
- **React Router**: Управление навигацией и маршрутизацией приложения.
- **React Hook Form**: Удобная работа с формами.
- **React Player**: Интеграция видео с YouTube.
- **Redux Toolkit**: Глобальное состояние приложения.
- **@tanstack/react-query**: Оптимизированное управление запросами к серверу.
- **Axios**: Простое выполнение HTTP-запросов.
- **Zod**: Валидация данных и типов.
- **Hookform Resolvers**: Интеграция Zod для валидации форм.
- **Swiper**: Реализация интерактивных слайдеров.
- **SCSS**: Стилизация компонентов.
- **Vite**: Быстрая сборка приложения.
- **ESLint**: Линтинг и проверка качества кода.

## 📖 Состав продукта

### 🏠 **Главная страница**

- 🎲 **Случайный фильм**:
  - Отображается обложка случайного фильма и его описание.
  - Возможность сгенерировать новый фильм нажатием кнопки.
- ⭐️ **Топ-10 фильмов**:
  - Список лучших фильмов по рейтингу IMDb.

### 🎭 **Страница жанров**

- 📋 **Список жанров**:
  - Оформлен в виде карточек.
  - Переход к конкретному жанру через клик по карточке.

### 🎥 **Страница конкретного жанра**

- 🗂 **Карточки фильмов**:
  - Отображение фильмов, отфильтрованных по жанру.
  - По умолчанию отображаются первые 10 фильмов, отсортированные по рейтингу.
- 🔄 **Бесконечный скролл**:
  - Подгрузка следующих 10 фильмов при прокрутке, пока не закончится список.

### 🎬 **Страница фильма**

- 📖 **Детали фильма**:
  - Обложка и полная информация о фильме.
- ▶️ **Трейлер**:
  - Кнопка для открытия трейлера в модальном окне.
- ⭐️ **Избранное**:
  - Добавление или удаление фильма из избранного.
  - Если пользователь не авторизован, открывается модальное окно с формой авторизации/регистрации.

### 👤 **Страница аккаунта**

- 📄 **Информация о пользователе**:
  - Данные, указанные при регистрации.
- ⭐️ **Список избранного**:
  - Фильмы, добавленные пользователем в избранное.
- 🚪 **Выход**:
  - При разлогинивании пользователя происходит переход на главную страницу.

### 🔑 **Модальное окно авторизации**

- 🔐 **Авторизация/Регистрация**:
  - Открывается при добавлении фильма в избранное без авторизации.
  - Возможность переключаться между формой входа и формой регистрации.
- 🛑 **Валидация полей**:
  - Все поля обязательны для заполнения.
  - Пустые поля подсвечиваются красной рамкой.
- ✅ **Смена кнопки**:
  - После успешной авторизации кнопка «Войти» меняется на фамилию пользователя.

### 🔍 **Поиск фильма**

- **Модальное окно поиска**:
  - Ввод названия фильма.
  - Отображение списка фильмов с соответствующим заголовком.

## 🌟 Особенности

✨ При взаимодействии с API в проекте реализованы следующие ключевые моменты:

- 🚀 **Кастомная обработка HTTP-запросов**:

  - Функция `httpRequest.ts` упрощает выполнение HTTP-запросов и добавляет гибкость для работы с сервером.

- ⚠️ **Универсальная обработка ошибок**:

  - Функция `handleError.ts`:
    - Универсально обрабатывает любые ошибки.
    - Создает экземпляр кастомной ошибки `CustomError`, который содержит необходимую информацию об ошибке.

- 🔔 **Отображение ошибок и уведомлений**:
  - Используются специализированные компоненты `Snackbar` и `Message` для отображения:
    - Информационных сообщений.
    - Уведомлений об ошибках.
  - Компоненты работают через Redux Toolkit Slice:
    - **Файл**: `slice/snackbarSlice.ts`.
    - Управление отображением выполняется через кастомный хук `useSnackbar.tsx`.

## 🍪 Работа с API и авторизацией

### 📋 Важные моменты при работе с API:

1. **Авторизация через сессии**:

   - Запрос на авторизацию отправляется с введенными пользователем данными.
   - Если данные корректны, сервер возвращает `cookie`, содержащие информацию о сессии.

2. **Отправка запросов с учетом сессий**:

   - Все последующие запросы отправляются с `cookie`, чтобы сервер мог идентифицировать пользователя.
   - При работе с локалхоста включена поддержка cookies и авторизационных заголовков для кросс-доменных запросов. (В `Axios` добавлена настройка `withCredentials: true`.)

3. **Время жизни cookie**:
   - Сессия авторизации ограничена по времени.
   - По истечении срока действия cookie пользователь будет автоматически разлогинен, и процесс авторизации необходимо повторить.

## 📂 Структура проекта

```
📦 cinema-guide
│
├── 📁 public                          # Ресурсы
│   ├── 📁 fonts                       # Шрифты
│   └── 📁 img                         # Изображения
│
├── 📁 src                             # Исходный код
│   │
│   ├── 📁 API                         # Логика взаимодействия с API
│   │   │
│   │   ├── 📁 methods                 # Запросы API
│   │   │   ├── 📁 auth
│   │   │   ├── 📁 ...
│   │   │   └── 📁 ...
│   │   │
│   │   ├── 📁 utils                   # Утилиты API
│   │   │   ├── 📄 handleError.ts      # Универсальный обработчик всех ошибок
│   │   │   └── 📄 httpRequest.ts      # Кастомный методы работы с API
│   │   │
│   │   ├── 📄 _baseURL.ts             # URL для работы API
│   │   ├── 📄 _queryClient.ts
│   │   ├── 📄 _URLs.ts                # Методы API
│   │   └── 📄 index.ts
│   │
│   ├── 📁 App                         # Основной компонент приложения
│   │   ├── 📄 App.tsx                 # Главный компонент
│   │   ├── 📄 App.scss                # Стили для приложения
│   │   └── 📄 index.ts
│   │
│   ├── 📁 classes                     # Классы
│   │   └── 📄 customError.ts          # Кастомный класс ошибки
│   │
│   ├── 📁 components                  # Компоненты приложения
│   │   ├── 📁 About
│   │   │   ├── 📄 About.tsx
│   │   │   ├── 📄 About.scss
│   │   │   └── 📄 index.ts
│   │   │
│   │   ├── 📁 ...
│   │   └── 📁 ...
│   │
│   ├── 📁 hooks                       # Кастомные хуки
│   │   ├── 📄 useAuth.ts
│   │   ├── 📄 ...
│   │   └── 📄 ...
│   │
│   ├── 📁 pages                       # Страницы приложения
│   │   ├── 📁 Account
│   │   │   ├── 📄 Account.tsx
│   │   │   ├── 📄 Account.scss
│   │   │   └── 📄 index.ts
│   │   │
│   │   ├── 📁 ...
│   │   └── 📁 ...
│   │
│   ├── 📁 schemas                     # Схемы
│   │   ├── 📄 _apiResponse.ts
│   │   ├── 📄 ...
│   │   └── 📄 index.ts
│   │
│   ├── 📁 schemas                     # Схемы
│   │   ├── 📄 _apiResponse.ts
│   │   ├── 📄 ...
│   │   └── 📄 index.ts
│   │
│   ├── 📁 scss                        # Глобальные
│   │   ├── 📁 common                  # Общие стили
│   │   ├── 📁 extends                 # Переисопользуемые стили
│   │   └── 📁 tools                   # Миксины и переменные
│   │
│   ├── 📁 store                       # Redux Toolkit
│   │   ├── 📁 slice
│   │   └── 📄 index.ts
│   │
│   ├── 📁 types                       # Типы и интерфейсы
│   │   ├── 📁 types
│   │   ├── 📁 interfaces
│   │   └── 📄 index.ts
│   │
│   ├── 📁 utils                       # Функции-форматеры
│   │   ├── 📄 formatCurrency.ts
│   │   ├── 📄 ...
│   │   └── 📄 ...
│   │
│   └── 📄 main.tsx                    # Точка входа
│
├── 📄 .eslintrc.json                    # Настройки ESLint
├── 📄 .gitignore                        # Игнорируемые Git файлы
├── 📄 package.json                      # Зависимости проекта
├── 📄 README.md                         # Документация проекта
├── 📄 viteconfig.md                     # Настройки Vite
└── 📄 tsconfig.json                     # Настройки TypeScript
```

---

## 🚀 Установка и запуск проекта

### 1. Клонируйте репозиторий:

```bash
git clone https://github.com/ValeryMelik/ReactTS-Cinema-Guide.git
cd cinema-guide
```

### 2. Установите зависимости:

```bash
npm install
```

### 3. Запустите проект:

```bash
npm run dev
```

### 4. Перейдите по адресу:

```
http://localhost:5173
```

## 📧 Связаться с автором

Если у вас возникли вопросы, можете связаться со мной по telegram: `https://t.me/ValeryMelik`.
